{"remainingRequest":"/Users/cheng/xiedaima/morney/node_modules/babel-loader/lib/index.js!/Users/cheng/xiedaima/morney/node_modules/ts-loader/index.js??ref--13-2!/Users/cheng/xiedaima/morney/src/store/index.ts","dependencies":[{"path":"/Users/cheng/xiedaima/morney/src/store/index.ts","mtime":1647159193715},{"path":"/Users/cheng/xiedaima/morney/babel.config.js","mtime":1636385591694},{"path":"/Users/cheng/xiedaima/morney/node_modules/cache-loader/dist/cjs.js","mtime":1636385564689},{"path":"/Users/cheng/xiedaima/morney/node_modules/babel-loader/lib/index.js","mtime":1636385564688},{"path":"/Users/cheng/xiedaima/morney/node_modules/ts-loader/index.js","mtime":1636385568108}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UuanMiOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCBWdWV4IGZyb20gJ3Z1ZXgnOwppbXBvcnQgcm91dGVyIGZyb20gJ0Avcm91dGVyJzsKaW1wb3J0IGNsb25lIGZyb20gIkAvbGliL2Nsb25lIjsKaW1wb3J0IGNyZWF0ZUlkIGZyb20gIkAvbGliL2NyZWF0ZUlkIjsKVnVlLnVzZShWdWV4KTsgLy8gdHlwZSBSb290U3RhdGUgPSB7Ci8vICAgcmVjb3JkTGlzdDogUmVjb3JkSXRlbVtdLAovLyAgIHRhZ0xpc3Q6IFRhZ1tdLAovLyAgIGN1cnJlbnRUYWc/OiBUYWcKLy8gfQoKdmFyIHN0b3JlID0gbmV3IFZ1ZXguU3RvcmUoewogIHN0YXRlOiB7CiAgICB0YWdMaXN0OiBbXSwKICAgIGNyZWF0ZVJlY29yZEVycm9yOiBudWxsLAogICAgY3JlYXRlVGFnRXJyb3I6IG51bGwsCiAgICByZWNvcmRMaXN0OiBbXSwKICAgIGN1cnJlbnRUYWc6IHVuZGVmaW5lZAogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBmZXRjaFJlY29yZHM6IGZ1bmN0aW9uIGZldGNoUmVjb3JkcyhzdGF0ZSkgewogICAgICBzdGF0ZS5yZWNvcmRMaXN0ID0gSlNPTi5wYXJzZSh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oInJlY29yZExpc3QiKSB8fCAnW10nKTsKICAgIH0sCiAgICBjcmVhdGVSZWNvcmQ6IGZ1bmN0aW9uIGNyZWF0ZVJlY29yZChzdGF0ZSwgcmVjb3JkKSB7CiAgICAgIHZhciByZWNvcmQyID0gY2xvbmUocmVjb3JkKTsKICAgICAgcmVjb3JkMi5jcmVhdGVkQXQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7CiAgICAgIHN0YXRlLnJlY29yZExpc3QucHVzaChyZWNvcmQyKTsKICAgICAgc3RvcmUuY29tbWl0KCdzYXZlUmVjb3JkcycpOwogICAgfSwKICAgIHNhdmVSZWNvcmRzOiBmdW5jdGlvbiBzYXZlUmVjb3JkcyhzdGF0ZSkgewogICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oInJlY29yZExpc3QiLCBKU09OLnN0cmluZ2lmeShzdGF0ZS5yZWNvcmRMaXN0KSk7CiAgICAgIGNvbnNvbGUubG9nKCJzdGF0ZSIsIHN0YXRlKTsKICAgIH0sCiAgICBmZXRjaFRhZ3M6IGZ1bmN0aW9uIGZldGNoVGFncyhzdGF0ZSkgewogICAgICBzdGF0ZS50YWdMaXN0ID0gSlNPTi5wYXJzZSh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oInRhZ0xpc3QiKSB8fCAnW10nKTsKCiAgICAgIGlmICghc3RhdGUudGFnTGlzdCB8fCBzdGF0ZS50YWdMaXN0Lmxlbmd0aCA9PT0gMCkgewogICAgICAgIHN0b3JlLmNvbW1pdCgnY3JlYXRlVGFnJywgJ+ihoycpOwogICAgICAgIHN0b3JlLmNvbW1pdCgnY3JlYXRlVGFnJywgJ+mjnycpOwogICAgICAgIHN0b3JlLmNvbW1pdCgnY3JlYXRlVGFnJywgJ+S9jycpOwogICAgICAgIHN0b3JlLmNvbW1pdCgnY3JlYXRlVGFnJywgJ+ihjCcpOwogICAgICB9CiAgICB9LAogICAgc2V0Q3VycmVudFRhZzogZnVuY3Rpb24gc2V0Q3VycmVudFRhZyhzdGF0ZSwgaWQpIHsKICAgICAgc3RhdGUuY3VycmVudFRhZyA9IHN0YXRlLnRhZ0xpc3QuZmlsdGVyKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgcmV0dXJuIHQuaWQgPT09IGlkOwogICAgICB9KVswXTsKICAgIH0sCiAgICBjcmVhdGVUYWc6IGZ1bmN0aW9uIGNyZWF0ZVRhZyhzdGF0ZSwgbmFtZSkgewogICAgICBzdGF0ZS5jcmVhdGVUYWdFcnJvciA9IG51bGw7CiAgICAgIHZhciBuYW1lcyA9IHN0YXRlLnRhZ0xpc3QubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW0ubmFtZTsKICAgICAgfSk7CgogICAgICBpZiAobmFtZXMuaW5kZXhPZihuYW1lKSA+PSAwKSB7CiAgICAgICAgc3RhdGUuY3JlYXRlVGFnRXJyb3IgPSBuZXcgRXJyb3IoJ3RhZyBuYW1lIGR1cGxpY2F0ZWQnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBpZCA9IGNyZWF0ZUlkKCkudG9TdHJpbmcoKTsKICAgICAgc3RhdGUudGFnTGlzdC5wdXNoKHsKICAgICAgICBpZDogaWQsCiAgICAgICAgbmFtZTogbmFtZQogICAgICB9KTsKICAgICAgc3RvcmUuY29tbWl0KCdzYXZlVGFncycpOwogICAgICB3aW5kb3cuYWxlcnQoIuagh+etvua3u+WKoOaIkOWKnyIpOwogICAgfSwKICAgIHVwZGF0ZVRhZzogZnVuY3Rpb24gdXBkYXRlVGFnKHN0YXRlLCBwYXlsb2FkKSB7CiAgICAgIHZhciBpZCA9IHBheWxvYWQuaWQsCiAgICAgICAgICBuYW1lID0gcGF5bG9hZC5uYW1lOwogICAgICB2YXIgaWRMaXN0ID0gc3RhdGUudGFnTGlzdC5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gaXRlbS5pZDsKICAgICAgfSk7CgogICAgICBpZiAoaWRMaXN0LmluZGV4T2YoaWQpID49IDApIHsKICAgICAgICB2YXIgbmFtZXMgPSBzdGF0ZS50YWdMaXN0Lm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuIGl0ZW0ubmFtZTsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKG5hbWVzLmluZGV4T2YobmFtZSkgPj0gMCkgewogICAgICAgICAgd2luZG93LmFsZXJ0KCLmoIfnrb7lkI3ph43lpI0iKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFyIHRhZyA9IHN0YXRlLnRhZ0xpc3QuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgIHJldHVybiBpdGVtLmlkID09PSBpZDsKICAgICAgICAgIH0pWzBdOwogICAgICAgICAgdGFnLm5hbWUgPSBuYW1lOwogICAgICAgICAgc3RvcmUuY29tbWl0KCdzYXZlVGFncycpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHJlbW92ZVRhZzogZnVuY3Rpb24gcmVtb3ZlVGFnKHN0YXRlLCBpZCkgewogICAgICB2YXIgaW5kZXggPSAtMTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RhdGUudGFnTGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgIGlmIChzdGF0ZS50YWdMaXN0W2ldLmlkID09PSBpZCkgewogICAgICAgICAgaW5kZXggPSBpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoaW5kZXggPj0gMCkgewogICAgICAgIHN0YXRlLnRhZ0xpc3Quc3BsaWNlKGluZGV4LCAxKTsKICAgICAgICBzdG9yZS5jb21taXQoJ3NhdmVUYWdzJyk7CiAgICAgICAgcm91dGVyLmJhY2soKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB3aW5kb3cuYWxlcnQoIuWIoOmZpOWksei0pSIpOwogICAgICB9CiAgICB9LAogICAgc2F2ZVRhZ3M6IGZ1bmN0aW9uIHNhdmVUYWdzKHN0YXRlKSB7CiAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidGFnTGlzdCIsIEpTT04uc3RyaW5naWZ5KHN0YXRlLnRhZ0xpc3QpKTsKICAgIH0KICB9Cn0pOwpleHBvcnQgZGVmYXVsdCBzdG9yZTs="},{"version":3,"sources":["/Users/cheng/xiedaima/morney/src/store/index.ts"],"names":[],"mappings":"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","sourcesContent":["import Vue from 'vue'\nimport Vuex from 'vuex'\nimport router from '@/router'\nimport clone from \"@/lib/clone\";\nimport createId from \"@/lib/createId\";\nVue.use(Vuex)\n\n// type RootState = {\n//   recordList: RecordItem[],\n//   tagList: Tag[],\n//   currentTag?: Tag\n// }\nconst store = new Vuex.Store({\n  state: {\n    tagList: [],\n    createRecordError: null,\n    createTagError: null,\n    recordList: [],\n    currentTag: undefined\n  } as RootState,\n  mutations: {\n    fetchRecords(state) {\n      state.recordList = JSON.parse(window.localStorage.getItem(\"recordList\") || '[]') as RecordItem[]\n    },\n    createRecord(state, record: RecordItem) {\n      const record2 = clone(record);\n      record2.createdAt = new Date().toISOString();\n      state.recordList.push(record2);\n      store.commit('saveRecords');\n    },\n    saveRecords(state) {\n      window.localStorage.setItem(\"recordList\", JSON.stringify(state.recordList))\n      console.log(\"state\", state);\n    },\n\n    fetchTags(state) {\n      state.tagList = JSON.parse(window.localStorage.getItem(\"tagList\") || '[]')\n      if (!state.tagList || state.tagList.length === 0) {\n        store.commit('createTag', '衣')\n        store.commit('createTag', '食')\n        store.commit('createTag', '住')\n        store.commit('createTag', '行')\n      }\n    },\n    setCurrentTag(state, id: string) {\n      state.currentTag = state.tagList.filter(t => t.id === id)[0];\n    },\n    createTag(state, name: string) {\n      state.createTagError=null\n      const names = state.tagList.map(item => item.name);\n      if (names.indexOf(name) >= 0) {\n        state.createTagError = new Error('tag name duplicated');\n        return;\n      }\n      const id = createId().toString();\n      state.tagList.push({ id: id, name: name })\n      store.commit('saveTags');\n      window.alert(\"标签添加成功\");\n    },\n    updateTag(state, payload: { id: string, name: string }) {\n      let { id, name } = payload;\n      const idList = state.tagList.map(item => item.id);\n      if (idList.indexOf(id) >= 0) {\n        const names = state.tagList.map(item => item.name);\n        if (names.indexOf(name) >= 0) {\n          window.alert(\"标签名重复\")\n        } else {\n          const tag = state.tagList.filter(item => item.id === id)[0];\n          tag.name = name;\n          store.commit('saveTags')\n        }\n      }\n    },\n    removeTag(state, id: string) {\n      let index = -1;\n      for (let i = 0; i < state.tagList.length; i++) {\n        if (state.tagList[i].id === id) {\n          index = i\n          break;\n        }\n      }\n      if (index >= 0) {\n        state.tagList.splice(index, 1);\n        store.commit('saveTags')\n        router.back()\n      } else {\n        window.alert(\"删除失败\");\n      }\n    },\n    saveTags(state) {\n      window.localStorage.setItem(\"tagList\", JSON.stringify(state.tagList))\n    },\n  }\n\n})\n\nexport default store;\n"],"sourceRoot":""}]}