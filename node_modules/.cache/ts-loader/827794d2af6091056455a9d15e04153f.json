{"remainingRequest":"/Users/cheng/xiedaima/morney/node_modules/babel-loader/lib/index.js!/Users/cheng/xiedaima/morney/node_modules/ts-loader/index.js??ref--13-2!/Users/cheng/xiedaima/morney/src/models/tagListModel.ts","dependencies":[{"path":"/Users/cheng/xiedaima/morney/src/models/tagListModel.ts","mtime":1646377691801},{"path":"/Users/cheng/xiedaima/morney/babel.config.js","mtime":1636385591694},{"path":"/Users/cheng/xiedaima/morney/node_modules/cache-loader/dist/cjs.js","mtime":1636385564689},{"path":"/Users/cheng/xiedaima/morney/node_modules/babel-loader/lib/index.js","mtime":1636385564688},{"path":"/Users/cheng/xiedaima/morney/node_modules/ts-loader/index.js","mtime":1636385568108}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UuanMiOwovL+WwgeijheS4gOS4qm1vZGVsIAppbXBvcnQgY3JlYXRlSWQgZnJvbSAiQC9saWIvY3JlYXRlSWQiOwp2YXIgbG9jYWxTdG9yYWdlS2V5TmFtZSA9ICJ0YWdMaXN0IjsKdmFyIHRhZ0xpc3RNb2RlbCA9IHsKICBkYXRhOiBbXSwKICBmZXRjaDogZnVuY3Rpb24gZmV0Y2goKSB7CiAgICB0aGlzLmRhdGEgPSBKU09OLnBhcnNlKHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShsb2NhbFN0b3JhZ2VLZXlOYW1lKSB8fCAnW10nKTsKICAgIHJldHVybiB0aGlzLmRhdGE7CiAgfSwKICBjcmVhdGU6IGZ1bmN0aW9uIGNyZWF0ZShuYW1lKSB7CiAgICB2YXIgbmFtZXMgPSB0aGlzLmRhdGEubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgIHJldHVybiBpdGVtLm5hbWU7CiAgICB9KTsKCiAgICBpZiAobmFtZXMuaW5kZXhPZihuYW1lKSA+PSAwKSB7CiAgICAgIHJldHVybiAnZHVwbGljYXRlZCc7CiAgICB9CgogICAgdmFyIGlkID0gY3JlYXRlSWQoKS50b1N0cmluZygpOwogICAgdGhpcy5kYXRhLnB1c2goewogICAgICBpZDogaWQsCiAgICAgIG5hbWU6IG5hbWUKICAgIH0pOwogICAgdGhpcy5zYXZlKCk7CiAgICByZXR1cm4gJ3N1Y2Nlc3MnOwogIH0sCiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoaWQsIG5hbWUpIHsKICAgIHZhciBpZExpc3QgPSB0aGlzLmRhdGEubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgIHJldHVybiBpdGVtLmlkOwogICAgfSk7CgogICAgaWYgKGlkTGlzdC5pbmRleE9mKGlkKSA+PSAwKSB7CiAgICAgIHZhciBuYW1lcyA9IHRoaXMuZGF0YS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gaXRlbS5uYW1lOwogICAgICB9KTsKCiAgICAgIGlmIChuYW1lcy5pbmRleE9mKG5hbWUpID49IDApIHsKICAgICAgICByZXR1cm4gJ2R1cGxpY2F0ZWQnOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciB0YWcgPSB0aGlzLmRhdGEuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICByZXR1cm4gaXRlbS5pZCA9PT0gaWQ7CiAgICAgICAgfSlbMF07CiAgICAgICAgdGFnLm5hbWUgPSBuYW1lOwogICAgICAgIHRoaXMuc2F2ZSgpOwogICAgICAgIHJldHVybiAnc3VjY2Vzcyc7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiAnbm90IGZvdW5kJzsKICAgIH0KICB9LAogIHNhdmU6IGZ1bmN0aW9uIHNhdmUoKSB7CiAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0obG9jYWxTdG9yYWdlS2V5TmFtZSwgSlNPTi5zdHJpbmdpZnkodGhpcy5kYXRhKSk7CiAgfSwKICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZShpZCkgewogICAgdmFyIGluZGV4ID0gLTE7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgaWYgKHRoaXMuZGF0YVtpXS5pZCA9PT0gaWQpIHsKICAgICAgICBpbmRleCA9IGk7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICB0aGlzLmRhdGEuc3BsaWNlKGluZGV4LCAxKTsKICAgIHRoaXMuc2F2ZSgpOwogICAgcmV0dXJuIHRydWU7CiAgfQp9OwpleHBvcnQgeyB0YWdMaXN0TW9kZWwgfTs="},{"version":3,"sources":["/Users/cheng/xiedaima/morney/src/models/tagListModel.ts"],"names":[],"mappings":";;;;;;;AAAA;AACA,OAAO,QAAP,MAAqB,gBAArB;AACA,IAAM,mBAAmB,GAAG,SAA5B;AACA,IAAM,YAAY,GAAiB;AAC/B,EAAA,IAAI,EAAE,EADyB;AAE/B,EAAA,KAF+B,mBAE1B;AACD,SAAK,IAAL,GAAY,IAAI,CAAC,KAAL,CAAW,MAAM,CAAC,YAAP,CAAoB,OAApB,CAA4B,mBAA5B,KAAoD,IAA/D,CAAZ;AACA,WAAO,KAAK,IAAZ;AACH,GAL8B;AAM/B,EAAA,MAN+B,kBAMxB,IANwB,EAMZ;AAEf,QAAM,KAAK,GAAG,KAAK,IAAL,CAAU,GAAV,CAAc,UAAA,IAAI;AAAA,aAAI,IAAI,CAAC,IAAT;AAAA,KAAlB,CAAd;;AACA,QAAI,KAAK,CAAC,OAAN,CAAc,IAAd,KAAuB,CAA3B,EAA8B;AAAE,aAAO,YAAP;AAAqB;;AACrD,QAAM,EAAE,GAAE,QAAQ,GAAG,QAAX,EAAV;AACA,SAAK,IAAL,CAAU,IAAV,CAAe;AAAE,MAAA,EAAE,EAAC,EAAL;AAAS,MAAA,IAAI,EAAE;AAAf,KAAf;AACA,SAAK,IAAL;AACA,WAAO,SAAP;AACH,GAd8B;AAe/B,EAAA,MAf+B,kBAexB,EAfwB,EAeZ,IAfY,EAeA;AAC3B,QAAM,MAAM,GAAG,KAAK,IAAL,CAAU,GAAV,CAAc,UAAA,IAAI;AAAA,aAAI,IAAI,CAAC,EAAT;AAAA,KAAlB,CAAf;;AACA,QAAI,MAAM,CAAC,OAAP,CAAe,EAAf,KAAsB,CAA1B,EAA6B;AACzB,UAAM,KAAK,GAAG,KAAK,IAAL,CAAU,GAAV,CAAc,UAAA,IAAI;AAAA,eAAI,IAAI,CAAC,IAAT;AAAA,OAAlB,CAAd;;AACA,UAAG,KAAK,CAAC,OAAN,CAAc,IAAd,KAAqB,CAAxB,EAA0B;AACtB,eAAO,YAAP;AACH,OAFD,MAEK;AACD,YAAM,GAAG,GAAE,KAAK,IAAL,CAAU,MAAV,CAAiB,UAAA,IAAI;AAAA,iBAAE,IAAI,CAAC,EAAL,KAAU,EAAZ;AAAA,SAArB,EAAqC,CAArC,CAAX;AACA,QAAA,GAAG,CAAC,IAAJ,GAAS,IAAT;AACA,aAAK,IAAL;AACA,eAAO,SAAP;AACH;AACJ,KAVD,MAUO;AACH,aAAO,WAAP;AACH;AACJ,GA9B8B;AA+B/B,EAAA,IA/B+B,kBA+B3B;AACA,IAAA,MAAM,CAAC,YAAP,CAAoB,OAApB,CAA4B,mBAA5B,EAAiD,IAAI,CAAC,SAAL,CAAe,KAAK,IAApB,CAAjD;AACH,GAjC8B;AAkC/B,EAAA,MAlC+B,kBAkCxB,EAlCwB,EAkCf;AACZ,QAAI,KAAK,GAAC,CAAC,CAAX;;AACA,SAAI,IAAI,CAAC,GAAC,CAAV,EAAY,CAAC,GAAC,KAAK,IAAL,CAAU,MAAxB,EAA+B,CAAC,EAAhC,EAAmC;AAC/B,UAAG,KAAK,IAAL,CAAU,CAAV,EAAa,EAAb,KAAkB,EAArB,EAAwB;AACpB,QAAA,KAAK,GAAC,CAAN;AACA;AACH;AACJ;;AACD,SAAK,IAAL,CAAU,MAAV,CAAiB,KAAjB,EAAuB,CAAvB;AACA,SAAK,IAAL;AACA,WAAO,IAAP;AACH;AA7C8B,CAAnC;AA+CA,SAAS,YAAT","sourcesContent":["//封装一个model \nimport createId from \"@/lib/createId\";\nconst localStorageKeyName = \"tagList\";\nconst tagListModel: TagListModel = {\n    data: [],\n    fetch() {\n        this.data = JSON.parse(window.localStorage.getItem(localStorageKeyName) || '[]')\n        return this.data;\n    },\n    create(name: string) {\n        \n        const names = this.data.map(item => item.name);\n        if (names.indexOf(name) >= 0) { return 'duplicated' }\n        const id =createId().toString();\n        this.data.push({ id:id, name: name })\n        this.save();\n        return 'success';\n    },\n    update(id: string, name: string) {\n        const idList = this.data.map(item => item.id);\n        if (idList.indexOf(id) >= 0) {\n            const names = this.data.map(item => item.name);\n            if(names.indexOf(name)>=0){\n                return 'duplicated'\n            }else{\n                const tag= this.data.filter(item=>item.id===id)[0];\n                tag.name=name;\n                this.save()\n                return 'success'\n            }\n        } else {\n            return 'not found'\n        }\n    },\n    save() {\n        window.localStorage.setItem(localStorageKeyName, JSON.stringify(this.data))\n    },\n    remove(id:string){\n        let index=-1;\n        for(let i=0;i<this.data.length;i++){\n            if(this.data[i].id===id){\n                index=i\n                break;\n            } \n        }\n        this.data.splice(index,1);\n        this.save();\n        return true;\n    }\n}\nexport { tagListModel }"],"sourceRoot":""}]}